<!DOCTYPE html> <html lang="ru"> <head> <meta charset="UTF-8" /> <meta name="viewport" content="width=device-width, initial-scale=1.0"/> <title>Проверка Telegram WebApp</title> <style> body { margin: 0; font-family: sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; background-color: #111; color: white; text-align: center; } .container { background: #222; padding: 30px; border-radius: 20px; box-shadow: 0 0 20px rgba(0,0,0,0.4); } .ok { color: #4caf50; font-size: 20px; } .error { color: #f44336; font-size: 20px; } .code-block { background-color: #333; color: #0f0; font-family: monospace; font-size: 14px; margin-top: 20px; padding: 10px; border-radius: 10px; max-height: 300px; overflow: auto; text-align: left; } </style> </head> <body> <div class="container"> <h2>Проверка Telegram WebApp</h2> <div id="status" class="error">⏳ Проверка...</div> <pre id="debug" class="code-block">{}</pre> </div> <script> window.addEventListener("DOMContentLoaded", () => { const statusEl = document.getElementById('status'); const debugEl = document.getElementById('debug'); try { if (window.Telegram && Telegram.WebApp && Telegram.WebApp.initDataUnsafe && Telegram.WebApp.initDataUnsafe.user) { const id = Telegram.WebApp.initDataUnsafe.user.id; statusEl.textContent = "✅ Telegram ID: " + id; statusEl.className = "ok"; } else { statusEl.textContent = "❌ Не удалось получить Telegram ID"; statusEl.className = "error"; } // Выводим отладочную информацию debugEl.textContent = JSON.stringify({ "window.Telegram": window.Telegram, "Telegram.WebApp": Telegram?.WebApp, "initDataUnsafe": Telegram?.WebApp?.initDataUnsafe }, null, 2); } catch (err) { statusEl.textContent = "⚠️ Ошибка при получении данных"; debugEl.textContent = err.message; } }); </script> </body> </html>
